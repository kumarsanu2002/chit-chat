(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{114:function(e,a,t){},115:function(e,a,t){},116:function(e,a,t){},117:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(8),o=t.n(l),r=(t(94),t(95),t(24)),i=(t(96),t(97),t(158)),s=t(72),u=t.n(s),m=t(157),d=t(154),h=t(151),f=(t(98),t(18)),p=t(36),b=Object(p.b)({name:"name",initialState:{chatId:null,chatName:null},reducers:{setChat:function(e,a){e.chatId=a.payload.chatId,e.chatName=a.payload.chatName}}}),E=b.actions.setChat,v=function(e){return e.chat.chatId},g=function(e){return e.chat.chatName},O=b.reducer,N=t(37),j=t.n(N),_=j.a.initializeApp({apiKey:"AIzaSyDIl4AlC-HK6SoI9AymHLz0kkTlqYGW1wU",authDomain:"clone-f66e7.firebaseapp.com",projectId:"clone-f66e7",storageBucket:"clone-f66e7.appspot.com",messagingSenderId:"737438890513",appId:"1:737438890513:web:31428caa9dc86fe1054fb0",measurementId:"G-4L972NGMB8"}).firestore(),C=j.a.auth(),y=new j.a.auth.GoogleAuthProvider,S=_,w=t(56),k=function(e){var a,t,l,o,s,u=e.id,m=e.chatName,d=Object(f.b)(),h=Object(n.useState)([]),p=Object(r.a)(h,2),b=p[0],v=p[1];return Object(n.useEffect)((function(){S.collection("chats").doc(u).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return v(e.docs.map((function(e){return e.data()})))}))}),[u]),c.a.createElement("div",{className:"sidebarChat",onClick:function(){d(E({chatId:u,chatName:m}))}},c.a.createElement(i.a,{src:null===(a=b[0])||void 0===a?void 0:a.photo}),"    ",c.a.createElement("div",{className:"sidebarChat__info"},c.a.createElement("h3",null,m),"           ",c.a.createElement("p",null,null===(t=b[0])||void 0===t?void 0:t.message),"  ",c.a.createElement("small",null,"           ",(null===(l=b[0])||void 0===l?void 0:l.timestamp)?w.a(new Date(null===(o=b[0])||void 0===o||null===(s=o.timestamp)||void 0===s?void 0:s.toDate()).toLocaleString()):"")))},I=Object(p.b)({name:"user",initialState:{user:null},reducers:{login:function(e,a){e.user=a.payload},logout:function(e){e.user=null}}}),A=I.actions,D=A.logout,L=A.login,x=function(e){return e.user.user},B=I.reducer,H=t(5),T=t(156),z=t(149),G=Object(H.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:11}}}))(m.a),M=function(){var e=Object(f.c)(x),a=Object(n.useState)([]),t=Object(r.a)(a,2),l=t[0],o=t[1],s=Object(n.useState)(!1),m=Object(r.a)(s,2),p=m[0],b=m[1],E=Object(n.useState)(""),v=Object(r.a)(E,2),g=v[0],O=v[1],N=Object(n.useState)(""),j=Object(r.a)(N,2),_=j[0],y=j[1],w=function(){b(!1)};Object(n.useEffect)((function(){S.collection("chats").onSnapshot((function(e){return o(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]);var I=l.filter((function(e){return e.data.chatName.includes(_.toLowerCase())}));return c.a.createElement("div",{className:"sidebar"},c.a.createElement(T.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:p,onClose:w,className:"sidebar__addChatModal"},c.a.createElement(z.a,{in:p},c.a.createElement("div",{className:"sidebar__addChatModalContainer"},c.a.createElement("h2",null,"Add Channel"),c.a.createElement(d.a,{value:g,onChange:function(e){return O(e.target.value)},id:"outlined-basic",label:"Enter Channel Name",variant:"outlined",margin:"dense"}),c.a.createElement(h.a,{onClick:function(){g&&(S.collection("chats").add({chatName:g}),O(""),w())},className:"sidebar__addChannelButton"},"Add Channel")))),c.a.createElement("div",{className:"sidebar__header"},c.a.createElement(G,{title:"Logout"},c.a.createElement(i.a,{onClick:function(){return C.signOut()},src:e.photo,className:"sidebar__avatar"})),c.a.createElement("div",{className:"sidebar__input"},c.a.createElement(u.a,null),c.a.createElement("input",{value:_,onChange:function(e){return y(e.target.value)},type:"text",placeholder:"Search"}))),c.a.createElement("div",{className:"sidebar__actions"},c.a.createElement(h.a,{onClick:function(){return C.signOut()}},"SignOut"),c.a.createElement(h.a,{onClick:function(){b(!0)}},"Add Chat")),c.a.createElement("div",{className:"sidebar__chats"},I.map((function(e){var a=e.id,t=e.data.chatName;return c.a.createElement(k,{key:a,id:a,chatName:t})}))))},W=(t(114),t(153)),J=(t(115),Object(n.forwardRef)((function(e,a){e.id;var t=e.contents,n=t.timestamp,l=(t.displayName,t.email),o=t.photo,r=t.message,s=(t.uid,Object(f.c)(x));return c.a.createElement("div",{ref:a,className:"message ".concat(s.email===l&&"message__sender")},c.a.createElement(i.a,{src:o,className:"message__photo"}),c.a.createElement("p",null,r),c.a.createElement("small",null,n?w.a(new Date(null===n||void 0===n?void 0:n.toDate()).toLocaleString()):""))}))),K=t(74),R=t(15),U=t(152),q=t(73),P=t.n(q),V=t(75),Y=t.n(V),F=function(e){var a=e.handleOpen,t=Object(R.a)(),l=Object(U.a)(t.breakpoints.down("xs")),o=Object(n.useState)(""),i=Object(r.a)(o,2),s=i[0],u=i[1],m=Object(f.c)(g),d=Object(f.c)(v),h=Object(f.c)(x),p=Object(n.useState)([]),b=Object(r.a)(p,2),E=b[0],O=b[1],N=Object(n.useRef)(null);Object(n.useEffect)((function(){d&&S.collection("chats").doc(d).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return O(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[d]);var _=function(e){e.preventDefault(),s&&(S.collection("chats").doc(d).collection("messages").add({timestamp:j.a.firestore.FieldValue.serverTimestamp(),message:s,uid:h.uid,photo:h.photo,email:h.email,displayName:h.displayName}),u(""),N.current.scrollTo(0,N.current.scrollHeight+100))};return c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat__header"},l&&c.a.createElement(P.a,{onClick:a}),c.a.createElement("h4",null,"To: ",c.a.createElement("span",{className:"chat__name"},m||"Select Chats"))),c.a.createElement("div",{className:"chat__messages",ref:N},c.a.createElement(K.a,null,E.map((function(e){var a=e.id,t=e.data;return c.a.createElement(J,{key:a,id:a,contents:t})})))),c.a.createElement("div",{className:"chat__input"},c.a.createElement("form",null,c.a.createElement("input",{value:s,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"Send Message"}),c.a.createElement("button",{type:"submit",onClick:_},"Send Message")),c.a.createElement(W.a,{type:"submit",onClick:_},c.a.createElement(Y.a,{className:"chat__mic"}))))},Q=t(155),Z=function(){var e=Object(R.a)(),a=Object(U.a)(e.breakpoints.down("xs")),t=Object(n.useState)(!0),l=Object(r.a)(t,2),o=l[0],i=l[1];return c.a.createElement("div",{className:"Imessage"},a?c.a.createElement(Q.a,{className:"Imessage__swiper",anchor:"left",open:o,onClose:function(){return i(!1)},onOpen:function(){return i(!0)}},c.a.createElement(M,null),"   "):c.a.createElement(M,null),c.a.createElement(F,{handleOpen:function(){return i(!0)}}))},$=(t(116),function(){return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__container"},c.a.createElement("img",{src:"https://lh3.googleusercontent.com/5BjJo4ffycb9cSba9_dq5UE07Y3SvL3fw4gOoZAzQyjfnwC1d_7dxyKHHr2VmunLDg",alt:"logo"}),c.a.createElement("div",{className:"login__text"},c.a.createElement("h1",null,"CHIT-CHAT")),c.a.createElement(h.a,{type:"submit",onClick:function(e){e.preventDefault(),C.signInWithPopup(y).catch((function(e){return alert(e.message)}))}},"Sign in With Google")))});var X=function(){var e=Object(f.c)(x),a=Object(f.b)();return Object(n.useEffect)((function(){C.onAuthStateChanged((function(e){a(e?L({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName}):D())}))}),[a]),c.a.createElement("div",{className:"app"},e?c.a.createElement(Z,null):c.a.createElement($,null))},ee=Object(p.a)({reducer:{user:B,chat:O}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(f.a,{store:ee},c.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,a,t){e.exports=t(117)},94:function(e,a,t){},95:function(e,a,t){},96:function(e,a,t){},97:function(e,a,t){},98:function(e,a,t){}},[[89,1,2]]]);
//# sourceMappingURL=main.acf65828.chunk.js.map